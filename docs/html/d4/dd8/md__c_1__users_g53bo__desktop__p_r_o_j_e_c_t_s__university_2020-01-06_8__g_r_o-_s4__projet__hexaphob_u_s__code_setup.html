<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HexaphobUS: Setup</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../hexaphobus_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">HexaphobUS
   </div>
   <div id="projectbrief">Hexapod robot | UdeS-GRO</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Setup </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a href="../../#Install">Installations</a><ul>
<li><a href="../../#insKMS">Install KMS</a></li>
<li><a href="../../#insGit">Install Git</a></li>
<li><a href="../../#insIDE">Install IDE</a></li>
</ul>
</li>
<li><a href="../../#KeyManage">Key Management</a><ul>
<li><a href="../../#kmGen">Generate keys</a></li>
<li><a href="../../#kmExp">Export keys</a></li>
</ul>
</li>
<li><a href="../../#GitConfig">Git Configuration</a><ul>
<li><a href="../../#DirectGit">Stage, commit and push using Git</a></li>
</ul>
</li>
<li><a href="../../#IDEConfig">IDE Configuration</a><ul>
<li><a href="../../#IDEGitConfig">Git on VSCode/VSCodium</a></li>
<li><a href="../../#IDEArduinoConfig">Arduino on VSCode/VSCodium</a></li>
</ul>
</li>
</ul>
<p>This setup procedure is provided for people who wish to know the details about key management for signed commits, and integration of Git and Arduino in an IDE of their choice. Personally, we chose VSCodium for Windows 10 and Debian 9 (Raspberry Pi 3+) as our IDE, with the Arduino IDE as a dependency, and GnuPG as our key management system.</p>
<p>Notes:</p><ul>
<li>Git integration might be easier with GitHub Desktop or GitKraken. To be explored.</li>
<li>Key management can also work with an SSH protocol. To be explored.</li>
<li>If you wish to add your own procedure to this file, contact one of the contributors.</li>
</ul>
<h1><a class="anchor" id="autotoc_md1"></a>
&lt;a id="Install"&gt;&lt;/a&gt;Installations</h1>
<h3><a class="anchor" id="autotoc_md2"></a>
&lt;a id="insKMS"&gt;&lt;/a&gt;Install Key Management System (KMS)</h3>
<ul>
<li>Linux: <a href="https://www.gnupg.org/download/">GnuPG</a></li>
<li>Mac: <a href="https://sourceforge.net/p/gpgosx/docu/Download/">GnuPG for OS X</a> and <a href="https://gpgtools.org/">GPG tools</a></li>
<li>Windows: <a href="https://gpg4win.org/download.html">Gpg4win</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md3"></a>
&lt;a id="insGit"&gt;&lt;/a&gt;Install Git</h3>
<ul>
<li><a href="https://git-scm.com/download/linux">Linux</a></li>
<li><a href="https://git-scm.com/download/mac">Mac</a></li>
<li><a href="https://git-scm.com/download/win">Windows</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md4"></a>
&lt;a id="insIDE"&gt;&lt;/a&gt;Install Integrated Development Environment (IDE)</h3>
<ul>
<li><a href="https://www.arduino.cc/en/main/software">Arduino</a></li>
<li><a href="https://code.visualstudio.com/">VSCode</a></li>
<li><a href="https://github.com/VSCodium/vscodium/releases">VSCodium</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
&lt;a id="KeyManage"&gt;&lt;/a&gt;Key Management</h1>
<h3><a class="anchor" id="autotoc_md6"></a>
&lt;a id="kmGen"&gt;&lt;/a&gt;Generate keys</h3>
<p>Open Git Bash or Command Prompt, and generate a set of public and private keys. </p><div class="fragment"><div class="line">gpg --full-generate-key</div>
<div class="line"> </div>
<div class="line"># For GnuPG version 2.1.16 and below:</div>
<div class="line">gpg --default-new-key-algo rsa4096 --gen-key</div>
</div><!-- fragment --><p>Following <a href="https://help.github.com/en/github/authenticating-to-github/generating-a-new-gpg-key">Github</a>'s recommendations:</p><ul>
<li>Select the default protocol (RSA and RSA);</li>
<li>Select a 4096 bits key;</li>
<li>Select an expiration date (none for minimum maintenance);</li>
<li>Confirm;</li>
<li>Enter your name (real name, user name, etc.);</li>
<li>Enter your verified GitHub email adress (<b>important</b>);</li>
<li>Enter a comment (optional);</li>
<li>Enter a passphrase (this will allow you to access restricted GPG operations and sign your commits).</li>
</ul>
<h3><a class="anchor" id="autotoc_md7"></a>
&lt;a id="kmExp"&gt;&lt;/a&gt;Export keys</h3>
<p>Still in Git Bash or Command Prompt, display your newly-created keys. </p><div class="fragment"><div class="line">gpg --list-secret-keys --keyid-format LONG</div>
</div><!-- fragment --><p>The resulting text will look something like this: </p><div class="fragment"><div class="line">sec   rsa4096/&lt;sec-key-ID&gt; &lt;creation-date&gt; [SC]</div>
<div class="line">      &lt;long-sec-key-ID&gt;</div>
<div class="line">uid                 [ultimate] &lt;username&gt; &lt;email@example.com&gt;</div>
<div class="line">ssb   rsa4096/&lt;ssb-key-ID&gt; &lt;creation-date&gt; [E]</div>
</div><!-- fragment --><p>Select the public key ID (in the example above, <code>&lt;sec-key-ID&gt;</code>) and run the GPG export command. </p><div class="fragment"><div class="line">gpg --armor --export &lt;sec-key-ID&gt;</div>
</div><!-- fragment --><p>The entire public key should now be displayed: </p><div class="fragment"><div class="line">-----BEGIN PGP PUBLIC KEY BLOCK-----</div>
<div class="line">*Huge chunk of characters*</div>
<div class="line">-----END PGP PUBLIC KEY BLOCK-----</div>
</div><!-- fragment --><p>Copy the entire output, and setup a new GPG key on <a href="https://github.com/settings/keys">GitHub</a>.</p>
<p>Now we only need to register the public key to the GnuPG server, in order for the signed commits to work properly.</p><ul>
<li>Run <code>gpg --gen-revoke &lt;sec-key-ID&gt;</code>;</li>
<li>Confirm the revocation certificate;</li>
<li>Run <code>gpg --send-keys &lt;sec-key-ID&gt;</code> (<b>this only sends the public key</b>).</li>
</ul>
<p>The key management procedure is now complete. You can close the window.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
&lt;a id="GitConfig"&gt;&lt;/a&gt;Git Configuration</h1>
<p>The Git configuration can be managed at a local or a global level, depending on your needs. For our purposes, we will use a global config.</p>
<p>Open the Windows Command Prompt and run the following commands. If any issue is encountered later on, try again with an elevated Command Prompt:</p><ul>
<li>User-related:<ul>
<li><code>git config --global user.name &lt;username&gt;</code> (same username as your GitHub profile);</li>
<li><code>git config --global user.email &lt;email&gt;</code> (same email as your GitHub verified email address);</li>
<li><code>git config --global user.signingkey &lt;sec-key-ID&gt;</code>.</li>
</ul>
</li>
<li>GPG-related:<ul>
<li>If key management was done on Git Bash: <code>git config --global gpg.program "&lt;drive&gt;:\&lt;programs&gt;\Git\usr\bin\gpg.exe"</code>;</li>
<li>On Command Prompt: <code>git config --global gpg.program "&lt;drive&gt;:\&lt;programs&gt;\GnuPG\bin\gpg.exe"</code>.</li>
</ul>
</li>
<li>Version control-related:<ul>
<li><code>git config --global commit.gpgsign true</code> (automatically signs commits).</li>
</ul>
</li>
</ul>
<p>The Git configuration procedure is now complete. You can close the window.</p>
<h3><a class="anchor" id="autotoc_md9"></a>
&lt;a id="DirectGit"&gt;&lt;/a&gt;Stage, commit, and push using Git</h3>
<p>To change the repository with files that aren't compatible with your IDE (CAD files, for instance), simply follow this procedure in a Git Bash window opened in your repository clone directory:</p>
<div class="fragment"><div class="line"># Stage changes</div>
<div class="line">git add .</div>
<div class="line"> </div>
<div class="line"># Check new and modified files for approval</div>
<div class="line">git status</div>
<div class="line"> </div>
<div class="line"># Commit with message</div>
<div class="line">git commit -a -m &lt;msg&gt;</div>
<div class="line"> </div>
<div class="line"># Push in the right branch</div>
<div class="line">git push origin &lt;branch&gt;</div>
</div><!-- fragment --><p>For more option or a deeper understanding of Git and its commands, refer to the <a href="https://git-scm.com/docs">Git documentation</a>.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
&lt;a id="IDEConfig"&gt;&lt;/a&gt;IDE Configuration</h1>
<h3><a class="anchor" id="autotoc_md11"></a>
&lt;a id="IDEGitConfig"&gt;&lt;/a&gt;Git on VSCode/VSCodium</h3>
<p>To configure Git in VSCode/VSCodium, open one IDE and follow these steps:</p><ul>
<li>Extensions (<code>Ctrl</code>+<code>Shift</code>+<code>X</code>): Make sure that the "Git Extension Pack" extension is installed (and any other Git extension you find useful);</li>
<li>File &amp;#8594; Preferences &amp;#8594; Settings (<code>Ctrl</code>+<code>,</code>) &amp;#8594; Extensions &amp;#8594; Git &amp;#8594; Enable Commit Signing;<ul>
<li>Alternatively, Show All Commands (<code>Ctrl</code>+<code>Shift</code>+<code>P</code>) &amp;#8594; Preferences: Open settings (JSON) &amp;#8594; Add: <code>"git.enableCommitSigning": true</code>. You can also add the command to the workspace JSON settings, it will override the user defaults. If you set it in the workspace, make sure every collaborator has setup their KMS, else the command will prevent them from committing to the repository.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md12"></a>
&lt;a id="IDEArduinoConfig"&gt;&lt;/a&gt;Arduino on VSCode/VSCodium</h3>
<p>To configure Arduino in VSCode/VSCodium, follow these steps:</p><ul>
<li>Make sure that you install the <a href="../../#insIDE">Arduino IDE</a>: the Arduino extension on VSCode/VSCodium will need its executables;</li>
<li>Find your Arduino path file ("&lt;drive:\&lt;programs&gt;\Arduino", for instance) and add the <a href="../../../README.md#PWM">Sunfounder PWM Servo Driver library</a> to the Arduino libraries ("&lt;drive&gt;:\&lt;programs&gt;\Arduino\libraries" with folder name "Adafruit_PWMServoDriver", for instance). This step is specific to our project;</li>
<li>On VSCode or VSCodium;<ul>
<li>Extensions (<code>Ctrl</code>+<code>Shift</code>+<code>X</code>): Make sure that the "Arduino" extension is installed (and any other Arduino/C/C++ extension you find useful);</li>
<li>Show All Commands (<code>Ctrl</code>+<code>Shift</code>+<code>P</code>) &amp;#8594; Preferences: Open settings (JSON) &amp;#8594; Add the following parameters (according to the <a href="https://github.com/microsoft/vscode-arduino">VSCode Arduino extension's GitHub page</a>): ```bash "arduino.path": "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino", "arduino.commandPath": "arduino_debug.exe", "arduino.logLevel": "info", "arduino.enableUSBDetection": true, "arduino.disableTestingOpen": false, "arduino.skipHeaderProvider": false, "arduino.additionalUrls": [ "https://raw.githubusercontent.com/VSChina/azureiotdevkit_tools/master/package_azureboard_index.json", "http://arduino.esp8266.com/stable/package_esp8266com_index.json" ], "arduino.defaultBaudRate": 115200 ```</li>
<li>Inside your workspace's ".vscode" folder, add the file "arduino.json" and write the following parameters: ```bash { "port": "&lt;port_name&gt;", "board": "arduino:avr:&lt;type&gt;", "configuration": "cpu=&lt;cpu_type&gt;", "sketch": "&lt;file_directory&gt;\\&lt;file_name&gt;.ino" } ```</li>
<li>Still in the same folder, add the file "c_cpp_properties.json" and write the following parameters: ```bash { "configurations": [ { "name": "Win32", "includePath": [ "${workspaceFolder}\\**", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\tools\\**", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\libraries\\**", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\arduino\\avr\\**", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduion\\hardware\\arduino\\avr\\cores\\arduino", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\arduino\\avr\\libraries\\EEPROM\\src", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\arduino\\avr\\libraries\\HID\\src", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\arduino\\avr\\libraries\\SoftwareSerial\\src", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\arduino\\avr\\libraries\\SPI\\src", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\arduino\\avr\\libraries\\Wire\\src", "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\arduino\\avr\\libraries\\SPI\\src" ], "defines": [ "_DEBUG", "UNICODE", "_UNICODE", "F_CPU=16000000L", "ARDUINO=10805", "ARDUINO_AVR_UNO", "ARDUINO_ARCH_AVR" ], "compilerPath": "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\tools\\avr\\bin\\avr-gcc.exe", "cStandard": "c11", "cppStandard": "c++17", "intelliSenseMode": "msvc-x64", "forcedInclude": [ "&lt;drive&gt;:\\&lt;programs&gt;\\Arduino\\hardware\\arduino\\avr\\cores\\arduino\\Arduino.h" ] } ], "version": 4 } ```</li>
</ul>
</li>
</ul>
<p>The IDE configuration procedure is now complete. You can close the window.</p>
<h1><a class="anchor" id="autotoc_md13"></a>
autotoc_md13</h1>
<p>That's it! You should have integrated Git and Arduino into your favorite IDE now, and allowed a KMS to sign your commits. If any issue persists, you can find help online on Stack Overflow, the GitHub forums, and more. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
